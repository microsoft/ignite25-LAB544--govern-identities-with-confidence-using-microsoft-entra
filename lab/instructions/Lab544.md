# Lab 1: Adding an ID Governance Trial license

## Exercise 1: Logging into your lab environment

1. In the upper right corner of your lab environment, select the **Resources** tab. (next to **Instructions**)

1. At the bottom of the new page, the **Password** button to auto-type your password to log into your lab.

1. Select the **Instructions** tab to switch back.

## Exercise 2: Adding a ID Governance trial

#### Task 1 - Log into Entra for the first time.

1. Open the Edge browser.

1. Navigate to the **Entra admin center** at https://entra.microsoft.com.

1. Select the **Resources** tab to get the username and password to log in.

- Select the **Administrative Username**
- Select the **Administrative Password**

1. If prompted to save your passowrd, select **Never for this site**.

1. Select **Yes** to the **Stay signed in?** prompt.

1. If prompted, complete the **MFA registration** process.

1. Select the **Instructions** tab to return to the lab steps.

#### Task 2 - Add the trial license

1. Scroll down to the bottom of the menu on the left.

1. Open **Billing**.

1. Select **Trials**.

1. Under **Microsoft Entra ID Governace** select **Free trial** to open a sign-up description.

1. Select the **Activate** button.

1. A new browser tab will open with a a title of **Microsoft Entra ID Governance Trial**.

1. Make sure you an Administrator role in the Email box.

1. Select **Next**.

1. If prompted, complete the **Not a robot** verification.

1. Select the **Sign In** button.

  >Note - Completing the sign in will bring you to the Checkout screen in the Microsoft 365 admin center.  Note the cost of the trial is $0.00.

1. Select **Try now**.

1. Close the tab when the **You're all set!** message appears

===

# Lab 2: Building a catalog in Microsoft Entra entitlement management

## Lab scenario

In a mid-sized software development company, the IT department decides to implement Microsoft Entra for entitlement management. The primary goal is to streamline access to resources and applications across the organization. With Microsoft Entra, they can define access packages based on roles or projects, which simplifies the process of granting or revoking access rights. For instance, when a new developer joins a project, the IT department can easily provide them with the necessary access by assigning them to the corresponding access package. This not only saves time but also reduces the risk of unauthorized access. Furthermore, Microsoft Entra's periodic access reviews ensure that only the right people have access to sensitive resources. In the implementation lab, the IT team will set up various access packages, define policies for automatic access assignment and revocation, and conduct a mock access review.

## Objectives

After you complete this lab, you will be able to:

- Build a catalog.
- Configure an access package.
- Deploy an access package to a user.
- Accept the entitlement as a user and confirm resource access.
- Revoke access to a package.

## Lab Setup
  - **Estimated Time**: 15 minutes

### Exercise 1: Create a catalog for the Sales team

#### Task 1: Create a Catalog

1. Launch the Microsoft Entra admin center at https://Entra.Microsoft.com.

1. In the menu on the left, navigate to and expand **ID governance** then **Entitlement management**.

1. Select **Catalogs** from the menu.

1. Select **+ New catalog** at the top of the screen.

1. Name and describe your **New catalog** with the following values:

  | Field | Value |
  | :---  | :---  |
  | Name  | catSales |
  | Description | Use this catalog to assign resources for memebers of the Sales team. |
  | Enabled | Yes |
  | Enabled for external users | No |
  | | |

1. Select **Create**.

#### Task 2: Add resources to the catalog

1. If you are not already there, navigate to the **Microsoft Entra admin center**, **Identity governance**, **Entitlement management**, then **Catalogs** page.

1. Select the **catSales** that we created in the previous task.

1. Select **Resources** from the menu.

1. Next select **+ Add resources** from the top of the page.

1. Using the selectors at the top of the screen, add the following resources:

  | Resource Type | Value |
  | :---  | :---  |
  | + Groups and Teams  | Sales and Marketing, and U.S. Sales |
  | + Applications | LinkedIn |
  | + SharePoint sites | Sales and Marketings, and U.S. Sales |
  | | |

1. Select the **+ Microsoft Entra role (Preview)** item.

1. In the serch box, search for Group.

1. From the search results add the **Group Administrator** and **License Administrator** roles.

1. Use the **Select** button at the bottom of the page to confirm you selections.

1. Select **Add**.

You should now have a **catSales** catalog with 7 resources in it.

#### Task 3: Generate the Access package

1. In Microsoft Entra admin center, select **Identity governance** then select **Entitlement management**.

1. From the Entitlement management menu, select **Access packages**.

1. Select **+ New access package** at the top of the screen.

1. Enter the requested values:

  | Field | Value |
  | :---  | :---  |
  | Name  | pkgSales |
  | Diplay name | Use this access package to assign resources to members of the Sales team. |
  | Catalog | catSales |
  | | |

  >**Note** - You must pick the catSales catalog we created in the previous task. This will provide the list of resources available to be assigned in this package.  There is a General package that is listed as the default.  If you accidentally chose this, you will not see any resources available.

1. Select the **Resource roles** tab.

  >Note, we are going to select the resources that you want to provide in this Access package, from the items in the catSales catalog.

1. Select the **+ Groups and Teams** button.

1. Mark the box next to **Sales and Marketing** then use the **Select** button at the bottom of the page.

1. Once the choice shows on the screen, set the **Select role** dropdown to set the Role to **Member** for each item.

1. Select the **+ Applications** button.

1. Mark the box next to **LinkedIn** then use the **Select** button to confirm.

1. Once the choice shows on the screen, set the **Select role** dropdown to choose **msiam_access**.

1. Select the **+ SharePoint sites** button.

1. Pick the **U.S. Sales** site from the list, then use the **Select** button to confirm.

1. Once the choice shows on the screen, set the **Select role** dropdown to **U.S. Sales Members**.

1. Select the **+ Microsoft Entra role (Preview)** button.

1. Select the **License Administrator** from the list, then use the **Select** button to confirm.

1. When the item shows in the list, set the **Select role** dropdown to **Eligible Member**.

1. Use the **Next: Requests>** to move to the Requests tab.

1. For the **Users who can request access** select the option **None (administrator direct assignment only)**.

1. Set the **Require approval** to **No**

1. Review the other values on the **Requests** page.

1. Move to the **Lifecycle** tab using the labels at the top of the screen.

1. Choose the values to set the lifecycle of the pacakge:

  | Field | Value |
  | :---  | :---  |
  | Access package assignments expire  | Number of Days |
  | Assignments expire after | 30 |
  | Users can request specific timeline | No |
  | Require access reviews | Unchecked |
  | | |

1. Select the **Review + create** at the bottom of the screen.

1. Review the values you chose on the Review + create screen.

1. Select **Create** to build your Access package.

=== 

# Lab 3: Onboarding a new hire with Lifecycle Workflows

## Lab Scenario
A new hire has joined the company and needs to have have their account and access set up.  Use Lifecycle workflows to onboard the user.

## Objectives
After you complete this lab, you will be able to:

- Create and configure a workflow
- Use the joiner workflow to onboard a new user

### Exercise 1: Use Lifecycle workflows to onboard a user

#### Task 1: Create a new Lifecycle workflow

1. Open the **Entra Portal** at https://entra.microsoft.com.

1. Expand the **ID Governance** portion of the menu on the left.

1. Select **Lifecycle workflows** from the menu.

1. Select the **+ Create workflow**.

1. Take a moment to read over the different types of workflow template you have availabe.

  >Note - There are several different workflows to choose from
  > - Joiner - For new employees
  > - Mover - For moving between jobs and roles
  > - Leaver - For employees leaving work

1. Select **Joiner - Onboard new hire employees** item.

1. Enter the following details about our new workflow:

- **Name** = Ignite onboard new hire
- **Description** = This is a lab work being used at Ignite to demonstrate the power of Lifecycle workflows

1. For **Trigger type** use the dropdown to select **Attribute changes**.

1. Set **Trigger attribute** to **department**.

1. Select **Next: Configure scope**.

1. We are using department equal **NewHire** as our rule.  Ensure that **department** in the Property.  Then type +++NewHire+++ into the **Value** box.

1. Select **Next: Review tasks**.

1. Open each of the existing **Task** and mark the box next the **Continue workflow execution on error**.  We want to make sure this lab workflow completes.

  >Note: Notice that three default tasks are chosen.  First we enable the users account, second we send a welcome email, and thrird we have the option to add them to a security group. The Add user to groups has a exclamation, because some configuration it require.  Let's finish setting our workflow.

1. Select the **Add user to groups** item.

1. Select **0 groups selected** link.

1. Mark the **sg-Retail** group from the list, the use the **Select** button.

1. Select **Save** to finish this task setup.

1. Select the **Send Welcome email** item.

1. Review the basic settings that can be configured.

1. Select the **Email Customization** tab at the top.

  >Note: You can write a custom email message for the new hire, to share any information needed.  This is a great place to share links, next steps, and other information. 

1. Select **Save** to complete the process.

1. Select the **+ Add tasks** button.

1. Mark the boxes next to **Request user access package assignment** and **Assign licenses to user** options.

1. Select the **Add** button to complete the choice.

1. Select the **Request user access package assignment**

1. Select the **No Access package selected** item on the page.

1. Mark the box next to **pkgSales** we previously created.

1. Use the **Select** button to confirm your choice.

1. Use the dropdown to set the **Select policy** to **Initial Policy**.

1. Put a mark in the box next to **Continue workflow execution on error**.

1. Select the **Save** button.

1. Select the **Assign licenses to user** item in the list of tasks.

1. Select the **0 licenses selected** item.

1. From the list, make the **Office 365 E3** box.

1. Use the **Select** button to confirm your choice.

1. Select the **Save** button.

1. Select **Review + Create** then **Create**.

#### Task 2: Enable and schedule the workflow

1. Wait for the Workflow to finish the creation process.

1. Select the **Ignite new hire** workflow from the list.

1. Review the different tabs on the left menu:

  - Properties: Here you can confirm the name and description of the workflow, along with the execution conditions.
  - Taks: View the current tasks and add / remove tasks as needed.
  - Execution conditions: What will trigger a user to be added to this workflow.
  - Version: Track the version history of this workflow
  - Workflow histroy: Get report information on how many times the workflow has run, and how many users it has applied to.

1. Select the **Overview** item in the menu.

1. Select **Enable schedule** option.

  >Note - this enables the workflow and allows it to start running on a regular schedule.

===

# Lab 4: Add a new user and test out the Workflow and Entitlement

#### Task 1: Create a new user

1. If you are not already there, navigate to the **Microsoft Entra admin center**.

1. From the menu on the left, select **Entra ID**, **User**, then **All User** from the menus.

1. Select **+ New user** at the top of the page.

1. Fill in the values on the **Basics** page:

  | Field | Value |
  | :---  | :---  |
  | User principal name  | ChrisGr |
  | Diplay name | Christopher Green |
  | Auto-generated password | Checked on |
  | Account enabled | Checked **Off** |
  | | |

1. Copy and paste the **User principal name** and the **Password** to a safe location like Notepad (you will need this information later in this lab).

1. Select the **Properties** tab.

1. Set the **Department** to NewHire, so we can trigger our workflow.

1. At the bottom of the Properties screen set the **Usage location = United States**.

1. Select **Review + Create** then select **Create**.

1. Use the **Refresh** button to see our new user.

#### Task 2: Check the workflow status
Note that it will take several minutes for the process to recognize our newly created user in the NewHire department.  Workflows are designed to only search for users to process every 5 minutes or so.  Please be patient for the next step.

1. From the left menu, open **ID Governance** and then **Lifecycle workflows**.

1. Select **Workflows** from the menu.

1. Select the **Ignite new hire** workflow we created earlier.

1. At the bottom of the page select **View Users in Scope**

  >Lab Tip -- It may take up to 10 minutes for ChrisGr to show up in the list.

1. When **Christopher Green** name appears on the list, select the breadcrump **Ignite new hire | Overview**

  >Lab Tip -- If Christopher does not show up after a couple of minutes, use the Run On Demand option.

1. Select the **Run on demand** tab.

1. Manually add **Christopher Green** using the **+ Select Users**.

1. Use the **Run workflow** button to launch the process.

#### Task 3: Check to see if Christopher Green has been added

1. Open a **New InPrivate window** on your browser.

1. Connect to **Microsoft Entra admin center** at +++https://entra.microsoft.com+++ address.

1. Log into the site using your Chistopher Green account and password created earlier.

1. You will be prompted to change your password.  Set a new password and record it in a tool like Notepad for future use.

  >Note - It is recommended that you use the **User Password** from the **Resources** tab, to make this process easier.

1. Complete the **MFA process** if requested to do so.

1. Select **Identity**, then **Users**, then **All Users**, and then select **Christopher Green**.

1. From the menu on the left, select **Groups**.

1. Confirm that you have been granted access to the **Sales and Marketing** group, per the Access Package.

1. From the menu on the left, select **Applications**.

1. Confirm that you have **LinkedIn** is your assigned applications.

#### Task 4: Test the Just in Time Access for Christoper Green as a License Administrator

1. In the **Microsoft Entra admin center** use the menu on the left to navigate to **ID Governance** and then **Privileged Identity Management**.

1. Select **My roles**.

1. Notice under the **Eligible assignments** that Chirstopher has **License Administrator** that was assigned by the entitlement package.

1. Select the **Activate** item on the far right of the row.

1. Mark the box next the **Custom activation start time**.

1. Use the default **Start time** information as it should align to your lab time.

1. Use the slider to set the **Duration (hours)** to **1**.

1. Add the reason +++I need to grant an office licenses to new hires in the marketing team.+++

1. Select the **Activate** button at the bottom of the screen.

  >Note - you should see a series of Stages in the role activation.  We did not require activation in this lab, to enable the completion process.  But the recommendation is that you use that feature of Privileged Identity Management (PIM).

1. We are done with Christopher Green at this point, pleaes **close the InPrivate browser** session.

#### Challenge Task - Dynamic changes to the Access package

  **Note** - This task does not have step by step instructions. You are provide the set of tasks, and you can reference previous steps above to remind you of where to make specific changes.

- Make sure you logged into **Microsoft Entra admin center** as your admin account.
- Open your **pkgSales** Access package.
- Go to the **Resources roles** and choose to remove the **Sales and Marketing** group and add in the **U.S. Sales** group instead.
- Use the **Assignments** tab to **Reprocess** the assignment.
- Log out and log back in as Christopher Green.  Note that the group assignments have changed.  That quick and easy.
- Revoke access by deleting the Assignment for Christopher Green.

### Conclusion
This is a simple lab to demo the basic features of Entitlement management and Lifecycle workflows.  Think of the option you could use this feature for; and the advanced configuration options you could configure within the lab.

===

## Lab 5 - Confirm that we don't have users accessing the LinkedIn that should not be using that resource.

#### Task 1 - Create an Access Review - Review Type

1. Sign into the **Microsoft Entra admin center** at https://entra.microsoft.com using the provided Administrator account.

1. From the menu on the left, scroll down and open **ID Governance**.

1. In the menu select **Access reviews**.

1. On the top menu, select **+ New access review**.

1. In the New access review pane, select the **Applications** item in the **Select what to review** dropdown.

1. Use the **+ Select applications(s)** to choose the **LinkedIn** from the list.

1. For the **Scope** select **All users**.

1. Select the **Next: Reviews** button at the bottom of the screen.

1. Temporarily mark the **Multi-stage review** box with a check.

  >Note - This is where you can choose to have several layers to your Access review. Use this for very important resouces, so that a single person's review does not add or remove a critical resource from user access. We are not going to build / test a multi-stage; but the process is very similar.

1. **Uncheck** the **Multi-stage** review box.

1. Fill out the Review page with the below values:

| Field name |	Value |
| :--- | :--- |
| Select reviewers |	Selected users(s) or groups(s) -- **MOD Administrator** |
| Duration (in days) |	5 |
| Review recurrence | Monthly |
| Start date | Today's date |
| End |	End after number of occurences |
| Occurences |	3 |

1. Select the **Next: Settings** button, to move forward.

1. Leave **Auto apply results to resoureces** box in the **unchecked** state.

  >Note - we want to make sure we validate the results after the review is complete.

1. Chose the option **Remove access** for the item **If reviewer don't respond**.

  >Note - this is a setting you can use to control your level of security. If no review responds in a less secure security posture, you can got with Approve Access. In a very secure security posture, you can use the Remove Access. When implementing your own solutions, pick what works best for your company.

1. For **At end of review, send notification to** select the **MOD Administrator** account you are using for this lab.

1. Leave the **Enable review decision helpers** at their **default values**.

1. Set the **Additional content for reviewer email** enter the value **Please complete your Access Review as soon as you can**.

1. Select the **Next: Review + Create**.

1. Enter the below values for the name and description:

| Field name | Value |
| :--- | :--- |
| Review name | Check LinkedIn |
| Description | In this access review, we check to see if the right people have access to LinkedIn. |

1. Select **Create**.

  >NOTE - It will only take about 20 seconds for the Access Review to be created, but it will take a couple minutes for it to run.  Check the status to see when it runs.

1. From the **ID Governance** menu select **Access reviews**.

1. Look for the **Check LinkedIn** review we just created.

1. Watch the **Status** to move from **Not started** to **Initializing** to **Active**.

1. Move to the next task when the status is **Active**.

#### Task 2 - Log into email to run the Access Review

1. Open a new tab in your browser, if you have it open.

1. Open the browser and connect to +++https://outlook.office.com/+++.

1. If prompted, enter your username and password from the **Resources** tab, but you should not be.

  >Note - You should have an email from **Microsoft Security** with a subject of **Action required: Review access to the LinkedIn**. This email might take up to 2 minutes to arrive.

1. Select the **Start review >** button.

1. Put a **check-mark** in the **circle** next to **Christopher Green**.

1. Select the **X Deny** option from the top menu.

1. Enter a reason to deny access to the resource. Example: +++The sales campaign is over and Christopher does not need access any more.+++

1. Select the **Submit** button to send your recommendation.

#### Task 3 - Confirm the Access review results

1. Close the **Outlook** tab in your browser, if you have it open.

1. Return to the **Microsoft Entra admin center** tab at +++https://Entra.Microsoft.com/+++.

1. In the menu on the left open **ID Governance**.

1. Select **Access reviews**.

1. Select the **Check LinkedIn** review that we built earlier in this lab.

1. Review the **Overview**.

  >Note - One user has been denied access in the graphic at the bottom on the page.

1. Select **Audit logs** in the **Current** portion of the menu.

1. You can see the review record to deny access.

You have completed this lab, thanks for your time.

